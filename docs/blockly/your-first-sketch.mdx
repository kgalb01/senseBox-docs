---
sidebar_position: 1
title: Dein erster Sketch
hide_title: false
---

import Layout from "@site/src/Layout";
import { useBoardStore } from "@site/src/lib/stores/store";
import BoardDropdown from "@site/src/components/BoardDropdown/BoardDropdown";

<Layout title="Dein erster Sketch">

Blockly ist die vom senseBox-Team entwickelte grafische Programmierumgebung für die senseBox. Sie ist online kostenlos und ohne Softwareinstallation verfügbar und basiert auf dem [Blockly Framework](https://developers.google.com/blockly) von Google.

## Erste Schritte

Öffne Blockly für senseBox in deinem Browser unter [https://blockly.sensebox.de](https://blockly.sensebox.de/). Dort musst du zuerst deine senseBox-Version auswählen.

![](/img/blockly-bilder/erster-sketch/Auswahl.png)

## Oberfläche

Nachdem du deine senseBox-Version ausgewählt hast, befindest du dich auf der Programmieroberfläche. Diese lässt sich in fünf wichtige Bereiche einteilen.

![](/img/blockly-bilder/erster-sketch/Oberflaeche.png)

1. **Die Menüleiste:**
   In der Menüleiste kannst du das verwendete Board oder die Sprache ändern. Auf der linken Seite hast du darüber hinaus die Möglichkeit zu den Tutorials und zu der Gallerie zu navigieren. Die Tutorials sind eine Anleitung für deine ersten Blockly Sketches und führen dich an die verschiedenen Sensoren und Funktionen der senseBox heran. In der Gallerie findest du ausgewählte Sketche vom senseBox-Team.
2. **Die Toolbar:**
   Hier findest du alle Blöcke zum Programmieren der senseBox. Die Farbe der Blöcke zeigt die jeweilige Kategorie an, zu welcher der Block gehört.
3. **Der Arbeitsbereich:**
   In diesem Bereich fügst du deine Programme zusammen. Unten rechts befinden sich Schaltfläche zum Zentrieren, Vergrößern, Verkleinern und Löschen der Blöcke.
4. **Kopieren, kompilieren und andere Funktionen von Blockly:**
   Hier findest du den wohl wichtigsten Knopf für Blockly. Mit dem orangenen 'Kompilieren' Knopf kannst du deinen erstellten Sketch kompilieren & herunterladen. Darüber hinaus kannst du hier deinen Sketch umbenenen, herunterladen, teilen, Screenshots erstellen oder den Arduino QUellcode deines Sketches in in die Zwischenablage speichern.
5. **Arduino Quellcode und XML Blöcke:**
   Hier wird dir parellel zur grafischen Programmierung der Arduino Quellcode angezeigt. Durch einen Klick auf die Schaltfläche XML Blöcke lässt sich die Ansicht auf den XML Code umschalten.

## Programmieren

Um dein Programm zu schreiben, müssen die Blöcke aus der Toolbar per Drag & Drop im Arbeitsbereich platziert werden.

### Schritt 1: Setup und Endlosschleife

Dieser Block wird direkt beim Starten der Oberfläche geladen und sollte immer verwendet werden. Die zwei Basisfunktionen `Setup()` und `Endlosschleife()` werden immer benötigt, um ein funtkionsfähiges Programm zu schreiben.
Alle Blöcke, die innerhalb der `Setup()`-Funktion stehen, werden nur zu Beginn des Programmes einmal ausgeführt. In dieser Funktion wird zum Beispiel das Display initialsiert oder die WLAN Verbindung hergestellt. Alle Blöcke, die innerhalb der `Endlosschleife()` stehen, werden fortlaufend ausgeführt. Der Mikrocontroller führt hierbei alle Blöcke immer wieder von oben nach unten hin aus. In der `Endlosschleife()` werden zum Beispiel die Sensoren ausgelesen oder auch die Messwerte auf SD-Karte gespeichert oder ins Internet übertragen.

![](/img/blockly-bilder/erster-sketch/blockly-es-1.svg)

### Schritt 2: Die eingebaute LED einschalten

Um die eingebaute LED anzuschalten, musst du den `LED an digital`-Block in die Endlosschleife ziehen. Anschließend wählst du unter PIN "BUILTIN_1" und unter Status "Ein" aus.

![](/img/blockly-bilder/erster-sketch/blockly-es-2.svg)

> Die eingebaute LED findest du über dem roten Reset-Knopf auf der senseBox MCU.

### Schritt 3: Die eingebaute LED blinken lassen

(
Um die eingebaute LED blinken zu lassen, ist es nötig, sie mit einem weiteren `LED an digital` Block wieder auszuschalten. Zusätzlich muss nach dem An- sowie Ausschalten eine Pause eingefügt werden, damit das Blinken überhaupt sichtbar ist. Den `Warte` Block findest du in der Kategorie `Zeit`.

![](/img/blockly-bilder/erster-sketch/blockly-es-3.svg)

## Herunterladen und Übertragen

Nachdem dein Programm fertig ist, klickst du den orangenen "Sketch kompilieren" Button und es wird dir eine .BIN-Datei zum Download angeboten. Diese musst du an einem beliebigen Ort speichern.

{useBoardStore((state) => state.board) === "senseBoxMCU" && (

  <div>
    <h3> Modus der senseBox MCU wechseln</h3>
    <div>
      <p>
        Die senseBox MCU verfügt über zwei Modi: den Programm- und den
        Lern-Modus.
      </p>
      <p>
        Im <b>Programm-Modus</b> wird ein übertragenes Programm ausgeführt. Du
        erkennst ihn daran, dass die grünen Status-LEDs der senseBox MCU
        leuchten.
      </p>
      <p>
        Im <b>Lern-Modus</b> wird die senseBox als Wechseldatenträger erkannt,
        und es können neue Programme übertragen werden. Du erkennst ihn daran,
        dass die rote LED neben dem Reset-Knopf dauerhaft leuchtet/pulsiert.
      </p>
      {/* Füge hier das Bild ein */}
      <img
        src="/img/blockly-bilder/erster-sketch/modi.png"
        alt="Beschreibung des Bildes"
      />
      <img
        src="/img/blockly-bilder/erster-sketch/Bildschirmfoto-vom-2022-08-30-10-53-35.png"
        alt="Bildschirmfoto"
      />
      <p>
        Um dein Programm übertragen zu können, musst du deine MCU nun in den
        Lern-Modus versetzen.
      </p>

      <h3> Übertragen </h3>
        <p>
            Schließt du deine senseBox MCU an deinen Computer an und führst einen
            Doppelklick auf dem roten Button aus, wird diese als Wechseldatendräger
            erkannt. Mit einem Klick auf “Code Kompilieren” in der Weboberfläche
            wird dein Programmcode auf dem Server kompiliert und eine .BIN-Datei
            wird dir zum Download angeboten. Je nachdem welches Betriebssystem du
            verwendest, unterscheidet sich nun der Kopiervorgang.
        </p>
        <p>
            <b>Kopieren unter Windows</b> Unter Windows kannst du die erstellte
            .BIN-Datei einfach per Drag & Drop auf den Wechseldatenträger SENSEBOX
            kopieren. Die rote LED am Button wird kurz flackern und anschließend
            startet das Board selbstständig neu und führt deinen Programmcode aus.
        </p>
        <p>
            <b>Kopieren unter MacOS</b> Unter MacOS funktioniert das Kopieren der
            .BIN-Datei per Drag & Drop leider zurzeit noch nicht. Eine Möglichkeit
            ist die Datei im Terminal per dd-Befehl zu kopieren (nur erfahrenen
            Nutzern zu empfehlen!) oder einen alternativen Dateimanager wie zum
            Beispiel muCommander zu verwenden.
        </p>
        <p>
            <b>Kopieren unter Linux</b> Unter Linux kannst du die erstellte
            .BIN-Datei einfach per Drag & Drop auf den Wechseldatenträger SENSEBOX
            kopieren. Die rote LED am Button wird kurz flackern und anschließend
            startet das Board selbstständig neu und führt deinen Programmcode aus.
        </p>
    </div>

  </div>
)}
{useBoardStore((state) => state.board) === "senseBoxMCU-S2" && (
  <div>
    <h3> Übertragen</h3>
    <p>
    Schließt du deine senseBox MCU-S2 an deinen Computer an und führst einen Doppelklick auf dem roten Button aus, wird diese als Wechseldatendräger erkannt. Mit einem Klick auf “Code Kompilieren” in der Weboberfläche wird dein Programmcode auf dem Server kompiliert und eine .BIN-Datei wird dir zum Download angeboten.
    </p>
    <p>
        Nun kannst du die heruntergaldene .BIN-Datei einfach per Drag & Drop auf den neu erscheinenden Wechseldatenträger ('SENSEBOX') kopieren. Die senseBox startet neu und spielt nun deinen Sketch ab.
    </p>
  </div>
)}

{useBoardStore((state) => state.board) === "" && (

<div className="flex justify-center items-baseline">
  <h3 className="text-center m-5">
    {" "}
    Bitte wähle dein Board aus, um die Übertragungsinformationen zu sehen.{" "}
  </h3>
  <BoardDropdown />
</div>
)}

> - [Blockly.senseBox.de](https://blockly.sensebox.de/)

</Layout>
